#:schema node_modules/wrangler/config-schema.json
name = "civitracker"
compatibility_date = "2024-12-25"
pages_build_output_dir = "dist"
compatibility_flags = ["nodejs_compat"]

[observability]
enabled = true

# Environment variables for Workers
[vars]
NODE_ENV = "production"

# D1 Database binding
[[d1_databases]]
binding = "DB"
database_name = "civitracker-db"
database_id = "964e58ca-0add-41f2-8c31-84fb379b4ce2"

# KV binding for scraper cache
[[kv_namespaces]]
binding = "SCRAPER_CACHE"
id = "abdeb4d15d6e4cb99ad7d3fe664169e9"

# Note: Cron triggers for scheduled-scraper.ts are configured via Dashboard
# Pages projects don't support [triggers] in wrangler.toml
# Configure via: Cloudflare Dashboard -> Workers & Pages -> civitracker -> Triggers
# Set schedule to: "0 3 * * *" (daily at 3 AM UTC)
