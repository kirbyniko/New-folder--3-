#:schema node_modules/wrangler/config-schema.json
name = "civitracker"
compatibility_date = "2024-12-25"
pages_build_output_dir = "dist"
compatibility_flags = ["nodejs_compat"]

[observability]
enabled = true

# Environment variables for Workers
[vars]
NODE_ENV = "production"

# Database binding (Neon PostgreSQL)
# Add your DATABASE_URL as a secret via: wrangler secret put DATABASE_URL

# Note: Cron triggers for scheduled-scraper.ts are configured via Dashboard
# Pages projects don't support [triggers] in wrangler.toml
# Configure via: Cloudflare Dashboard -> Workers & Pages -> civitracker -> Triggers
# Set schedule to: "0 3 * * *" (daily at 3 AM UTC)
